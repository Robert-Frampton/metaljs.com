<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">Documentation</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-github" target="_blank" href="https://github.com/metal/metal.js"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">Intro</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">Creating your own component</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">Transpiling and building your component</a></li><li class="docs-nav-item"><a href="/docs/testing.html" class="docs-nav-link">Testing your component</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">Importing a third party component</a></li></ul><p class="docs-nav-group">Guides</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">Alias</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">State</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy Components</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">Component Lifecycle</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">Nested Components</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">Inline Events</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">Progressive Enhancement</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">Performance</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>Soy Components</h1><p>This section will explain how to build rich widgets on Metal.js, by taking advantage of the built-in <a href="http://developers.google.com/closure/templates">soy templates</a> integration, enabling you to easily separate business logic from rendering logic.</p><p>So, for example, let's say we want to create a component called <strong>MyComponent</strong>, that has a body and a footer with content. The soy file would look like this:</p><textarea class="code" data-mode="x-soy">
&lbrace;namespace MyComponent&rbrace;

/**
* This renders the component's whole content.
*/
&lbrace;template .render&rbrace;
  &lbrace;@param bodyContent: html&rbrace;
  &lbrace;@param footerContent: html&rbrace;
  &lt;p&gt;&lbrace;$bodyContent&rbrace;&lt;/p&gt;
  &lt;footer&gt;&lbrace;$footerContent&rbrace;&lt;/footer&gt;
&lbrace;/template&rbrace;</textarea><p>Looking at that you can see that it's just a basic soy file. Now let's understand how this integration with the template works.</p><p>Firstly, Metal.js will by default use the template named `render` as the component's content. You can have other templates in youy soy file, but the `render` template should be the main one.</p><p>Secondly, each param used on this main template will be automatically added to the component's <a href="/docs/state.html">state</a>. This basically means that Metal.js will set these params as properties of the component, as well as track any changes to them, automatically rerendering the component when necessary. In <b>MyComponent</b>'s case this means that whenever the value of the <code>bodyContent</code> param is changed, that part of the component that uses it will be updated, even though there is no JavaScript code on MyComponent to handle this logic. The same goes for the <code>footerContent</code> param.</p><p>Metal.js's logic for updating the component's contents automatically is very smart, it uses <a href="http://google.github.io/incremental-dom">incremental-dom</a>, so it will only rerender the parts of the component that actually changed.</p><p>Since all that rendering logic is done automatically for you just from creating a soy file, you don't actually need a JS file at all if that's all the component needs to do. When compiled, the soy file will already generate the appropriate component class for you.</p><p>Many components do need more behavior though, so to add more JS to a soy component you should have a JS file like this:</p><textarea class="code" data-mode="javascript">
import templates from './MyComponent.soy';
import Component from 'metal-component';
import Soy from 'metal-soy';

class MyComponent extends Component {
}
Soy.register(MyComponent, templates);

export default MyComponent;</textarea><p>It basically just defines a class named <b>MyComponent</b> that extends Metal.js's <b>Component</b> class, and registers its soy templates (which are automatically exported from the soy file).</p><p>There are many ways to add behavior to your component. You can add handlers for <a href="/docs/inline-events.html">inline listeners</a>, add <a href="/docs/state.html">state configuration</a> or simply override <a href="/docs/component-lifecycle.html">lifecycle functions</a> to add any other logic you need.</p><p>Finally, to render an instance of MyComponent, just call <code>render</code>, passing any attribute values that you want to initialize:</p><textarea class="code" data-mode="javascript">
new MyComponent({
	bodyContent: 'My Body',
	footerContent: '&lt;footer&gt;My Footer.&lt;/footer&gt;'
}).render(parentElement);</textarea></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>Brought to you by <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a>.</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal.js/blob/master/LICENSE.md">BSD</a> License.</span></p></div></footer><script src="/scripts/highlight.js"></script></body></html>