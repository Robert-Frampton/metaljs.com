<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">Documentation</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-github" target="_blank" href="https://github.com/metal/metal.js"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">Quick Start</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">Getting Started</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">Tutorial: Modal</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">Tutorial: Modal - Events</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">Tutorial: Modal - Updates</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">Tutorial: Modal - Nested Components</a></li></ul><p class="docs-nav-group">Guides</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">Alias</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">State</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy Components</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">Component Lifecycle</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">Nested Components</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">Inline Events</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">Progressive Enhancement</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">Performance</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">Building</a></li><li class="docs-nav-item"><a href="/docs/testing.html" class="docs-nav-link">Testing</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">Importing</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>Transpiling and building your component</h1><p>As we mentioned before, Metal.js components are written in ES6, which means that we need a transpiling process before using it on a website. If you've followed the previous guide on how to create a component though, you'll already have access to multiple <a href="http://gulpjs.com/">gulp</a> tasks that enable you to achieve this. Those tasks are added to your project by <a href="https://www.npmjs.com/package/gulp-metal">gulp-metal</a>, which is automatically included by <strong>generator-metal</strong>. <strong>gulp-metal</strong> provides tasks for many different purposes, but this guide will focus on the tasks related to building your project.</p><h2>gulp-metal</h2><p>To run <strong>gulp-metal</strong> tasks you'll need to have <strong>gulp</strong> installed first. Just run:</p><pre><code>[sudo] npm i -g gulp</code></pre><p>To run a task, just call gulp with the task name. To run a task named <strong>foo</strong> for example you'd just need to do:</p><pre><code>gulp foo</code></pre><p>All tasks can be configured by going to the generated file called <code>gulpfile.js</code> on your project and passing different options to the <code>metal.registerTasks</code> function. The main build tasks and their options will be explained in more details below.</p><h2>gulp build</h2><p>This will transpile your source code and build it to the format of your choice. If you created your project through <strong>generator-metal</strong>, then this will be automatically configured to build to the format that was selected during the generator prompts.</p><p>You can still change the format you want to use after the project already exists though, you just need to pass the names of the build tasks you want to use as default to the <code>mainBuildJsTasks</code> option on your <code>gulpfile.js</code>. For example, if you wanted to start using the amd format you can do it like this:</p><textarea class="code" data-mode="javascript">
metal.registerTasks({
  ... // Other options
  mainBuildJsTasks: ['build:amd']
});</textarea><p>Besides transpiling ES6, the build task also handles soy and sass compilation for you. Built files are outputted to the <code>build</code> folder.</p><h2>gulp watch</h2><p>After running this task, any change you make to a js, soy or css file will trigger the build task automatically, so you don't have to keep doing this manually by yourself.</p><h2>gulp soy</h2><p>This handles only the soy compilation part of the build task. It's automatically called by <code>gulp build</code>.</p><h2>gulp css</h2><p>This handles only the css part of the build task. It's automatically called by <code>gulp build</code>.</p><h2>gulp build:globals</h2><p>This handles just the transpiling of ES6 modules to the globals format, meaning that all exported modules are exposed as global variables. This is the default value of the <code>mainBuildJsTasks</code> option, and so is the run called by <code>gulp build</code> if the option is not set to something else.</p><h2>gulp build:amd</h2><p>This handles just the transpiling of ES6 modules to the <a href="http://requirejs.org/docs/whyamd.html">AMD</a> format. It can be automatically called by <code>gulp build</code> if the <code>mainBuildJsTasks</code> option is set to it.</p><h2>gulp build:jquery</h2><p>This handles just the transpiling of ES6 modules to <a href="https://learn.jquery.com/plugins">jQuery plugins</a>. It can be automatically called by <code>gulp build</code> if the <code>mainBuildJsTasks</code> option is set to it.</p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>Brought to you by <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a>.</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal.js/blob/master/LICENSE.md">BSD</a> License.</span></p></div></footer><script src="/scripts/highlight.js"></script></body></html>